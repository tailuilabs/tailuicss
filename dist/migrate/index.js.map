{"version":3,"sources":["../../src/migrate/index.ts","../../src/migrate/scanner.ts","../../src/migrate/patterns.ts","../../src/migrate/matcher.ts","../../src/migrate/transformer.ts","../../src/migrate/reporter.ts","../../src/migrate/backup.ts"],"sourcesContent":["/**\n * TailUI Migration ‚Äî Orchestrator\n *\n * Coordinates scanning, matching, transforming, backup, and reporting.\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as readline from 'readline';\n\nimport { scanFile, findFiles } from './scanner';\nimport { findBestMatch } from './matcher';\nimport { applyReplacements, writeFile } from './transformer';\nimport { printReport, printFilePreview, printInteractiveItem } from './reporter';\nimport { createBackup, restoreBackup, listBackups } from './backup';\n\n// --- Types & Interfaces ---\n\nexport interface MigrateOptions {\n  target: string;\n  all?: boolean;\n  dryRun?: boolean;\n  interactive?: boolean;\n  force?: boolean;\n  threshold?: number;\n  undo?: boolean;\n  ai?: boolean;\n  aiConfig?: Record<string, any>;\n}\n\nexport interface Replacement {\n  file: string;\n  line: number;\n  original: string;\n  classString: string;\n  newClassString: string;\n  startIndex: number;\n  endIndex: number;\n  component: string;\n  uiClass: string;\n  uiVariants: string[];\n  score: number;\n}\n\nexport interface SkippedMatch {\n  file: string;\n  line: number;\n  component: string;\n  uiClass: string;\n  score: number;\n}\n\nexport interface MigrationStats {\n  filesScanned: number;\n  filesModified: number;\n  totalMigrations: number;\n  totalSkipped: number;\n  componentCounts: Record<string, number>;\n  skippedCounts: Record<string, number>;\n  unmatchedFiles: string[];\n  backupDir: string;\n}\n\n// --- Main Function ---\n\n/**\n * Run the migration process.\n */\nexport async function migrate(options: MigrateOptions): Promise<void> {\n  const projectRoot = process.cwd();\n\n  // ‚îÄ‚îÄ Handle --undo ‚îÄ‚îÄ\n  if (options.undo) {\n    return handleUndo(projectRoot);\n  }\n\n  // ‚îÄ‚îÄ Resolve target ‚îÄ‚îÄ\n  const targetPath = path.resolve(projectRoot, options.target);\n\n  if (!fs.existsSync(targetPath)) {\n    console.error(`  ‚ùå Target not found: ${options.target}`);\n    process.exit(1);\n  }\n\n  const isDirectory = fs.statSync(targetPath).isDirectory();\n\n  if (isDirectory && !options.all) {\n    console.error(`  ‚ùå \"${options.target}\" is a directory. Use --all to migrate all files in it.`);\n    console.error(`  Or use -f <file> to migrate a single file.`);\n    process.exit(1);\n  }\n\n  // ‚îÄ‚îÄ Collect files ‚îÄ‚îÄ\n  let files: string[];\n  if (isDirectory) {\n    files = findFiles(targetPath);\n    if (files.length === 0) {\n      console.log(`  ‚ö†Ô∏è  No supported files found in ${options.target}`);\n      return;\n    }\n    console.log(`\\n  üîç Scanning ${files.length} file${files.length > 1 ? 's' : ''} in ${options.target}...\\n`);\n  } else {\n    files = [targetPath];\n    console.log(`\\n  üîç Scanning ${path.basename(targetPath)}...\\n`);\n  }\n\n  // ‚îÄ‚îÄ Scan & Match ‚îÄ‚îÄ\n  const threshold = options.threshold || 60;\n  const allReplacements = new Map<string, Replacement[]>();\n  const allSkipped: SkippedMatch[] = [];\n\n  let totalMatches = 0;\n  let totalSkipped = 0;\n\n  for (const file of files) {\n    const classMatches = scanFile(file);\n    const fileReplacements: Replacement[] = [];\n\n    for (const classMatch of classMatches) {\n      const match = findBestMatch(classMatch, threshold);\n\n      if (match) {\n        fileReplacements.push({\n          file: classMatch.file,\n          line: classMatch.line,\n          original: classMatch.original,\n          classString: classMatch.classString,\n          newClassString: match.newClassString,\n          startIndex: classMatch.startIndex,\n          endIndex: classMatch.endIndex,\n          component: match.component,\n          uiClass: match.uiClass,\n          uiVariants: match.uiVariants,\n          score: match.score,\n        });\n        totalMatches++;\n      } else {\n        const lowMatch = findBestMatch(classMatch, 1);\n        if (lowMatch && lowMatch.score > 0) {\n          allSkipped.push({\n            file: classMatch.file,\n            line: classMatch.line,\n            component: lowMatch.component,\n            uiClass: lowMatch.uiClass,\n            score: lowMatch.score,\n          });\n          totalSkipped++;\n        }\n      }\n    }\n\n    if (fileReplacements.length > 0) {\n      allReplacements.set(file, fileReplacements);\n    }\n  }\n\n  // ‚îÄ‚îÄ No matches ‚îÄ‚îÄ\n  if (totalMatches === 0) {\n    console.log('  ‚ÑπÔ∏è  No Tailwind patterns matching TailUI components were found.');\n    if (totalSkipped > 0) {\n      console.log(`  ${totalSkipped} potential match${totalSkipped > 1 ? 'es' : ''} were below the confidence threshold (${threshold}%).`);\n      console.log(`  Try lowering the threshold with --threshold <number>.\\n`);\n    }\n    return;\n  }\n\n  // ‚îÄ‚îÄ Dry run mode ‚îÄ‚îÄ\n  if (options.dryRun) {\n    for (const [filePath, replacements] of allReplacements) {\n      printFilePreview(filePath, replacements);\n    }\n    printReport(buildStats(files, allReplacements, allSkipped, null), true);\n    return;\n  }\n\n  // ‚îÄ‚îÄ Interactive mode ‚îÄ‚îÄ\n  if (options.interactive) {\n    const accepted = await runInteractive(allReplacements);\n    if (accepted.size === 0) {\n      console.log('\\n  No changes applied.\\n');\n      return;\n    }\n\n    const filesToBackup = Array.from(accepted.keys());\n    const backupDir = createBackup(filesToBackup, projectRoot);\n    console.log(`\\n  üíæ Backup created: ${path.relative(projectRoot, backupDir)}`);\n\n    for (const [filePath, replacements] of accepted) {\n      const newContent = applyReplacements(filePath, replacements);\n      writeFile(filePath, newContent);\n      console.log(`  ‚òëÔ∏è Migrated: ${path.relative(projectRoot, filePath)} (${replacements.length} change${replacements.length > 1 ? 's' : ''})`);\n    }\n\n    printReport(buildStats(files, accepted, allSkipped, backupDir), false);\n    return;\n  }\n\n  // ‚îÄ‚îÄ Force / Default mode ‚îÄ‚îÄ\n  const filesToBackup = Array.from(allReplacements.keys());\n  const backupDir = createBackup(filesToBackup, projectRoot);\n  console.log(`  üíæ Backup created: ${path.relative(projectRoot, backupDir)}`);\n\n  for (const [filePath, replacements] of allReplacements) {\n    const newContent = applyReplacements(filePath, replacements);\n    writeFile(filePath, newContent);\n    console.log(`  ‚òëÔ∏è Migrated: ${path.relative(projectRoot, filePath)} (${replacements.length} change${replacements.length > 1 ? 's' : ''})`);\n  }\n\n  printReport(buildStats(files, allReplacements, allSkipped, backupDir), false);\n  console.log('  üí° Run `tailui migrate --undo` to revert changes.\\n');\n}\n\n/**\n * Run interactive mode ‚Äî prompt user for each replacement.\n */\nasync function runInteractive(allReplacements: Map<string, Replacement[]>): Promise<Map<string, Replacement[]>> {\n  const accepted = new Map<string, Replacement[]>();\n  const allReps: Replacement[] = [];\n\n  for (const [, replacements] of allReplacements) {\n    allReps.push(...replacements);\n  }\n\n  const rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout,\n  });\n\n  const ask = (prompt: string): Promise<string> => new Promise(resolve => {\n    rl.question(prompt, answer => resolve(answer.trim().toLowerCase()));\n  });\n\n  let skipFile: string | null = null;\n\n  for (let i = 0; i < allReps.length; i++) {\n    const rep = allReps[i];\n    if (skipFile === rep.file) continue;\n\n    printInteractiveItem(rep, i, allReps.length);\n    const answer = await ask('  Apply? [Y/n/s(kip file)/q(uit)] ');\n\n    if (answer === 'q' || answer === 'quit') break;\n\n    if (answer === 's' || answer === 'skip') {\n      skipFile = rep.file;\n      console.log(`  ‚è≠  Skipping remaining changes in ${path.basename(rep.file)}`);\n      continue;\n    }\n\n    if (answer === 'n' || answer === 'no') continue;\n\n    if (!accepted.has(rep.file)) {\n      accepted.set(rep.file, []);\n    }\n    accepted.get(rep.file)!.push(rep);\n  }\n\n  rl.close();\n  return accepted;\n}\n\n/**\n * Handle --undo: restore from the most recent backup.\n */\nfunction handleUndo(projectRoot: string): void {\n  const backups = listBackups(projectRoot);\n\n  if (backups.length === 0) {\n    console.log('  ‚ùå No backups found. Nothing to undo.\\n');\n    return;\n  }\n\n  console.log('\\n  üìã Available backups:\\n');\n  backups.forEach((b: any, i: number) => {\n    console.log(`    ${i + 1}. ${b.date} (${b.fileCount} file${b.fileCount > 1 ? 's' : ''})`);\n  });\n\n  const result = restoreBackup(projectRoot);\n\n  if (result) {\n    console.log(`\\n  ‚òëÔ∏è Restored ${result.restored} file${result.restored > 1 ? 's' : ''} from backup.`);\n    console.log(`  Backup: ${path.relative(projectRoot, result.backupDir)}\\n`);\n  } else {\n    console.log('  ‚ùå Failed to restore backup.\\n');\n  }\n}\n\n/**\n * Build statistics object for the report.\n */\nfunction buildStats(\n  files: string[], \n  replacementsMap: Map<string, Replacement[]>, \n  skipped: SkippedMatch[], \n  backupDir: string | null\n): MigrationStats {\n  const componentCounts: Record<string, number> = {};\n  const skippedCounts: Record<string, number> = {};\n  let totalMigrations = 0;\n\n  for (const [, replacements] of replacementsMap) {\n    for (const rep of replacements) {\n      const key = rep.uiClass;\n      componentCounts[key] = (componentCounts[key] || 0) + 1;\n      totalMigrations++;\n    }\n  }\n\n  for (const skip of skipped) {\n    const key = skip.uiClass;\n    skippedCounts[key] = (skippedCounts[key] || 0) + 1;\n  }\n\n  const modifiedFiles = new Set(replacementsMap.keys());\n  const unmatchedFiles = files.filter(f => !modifiedFiles.has(f));\n\n  return {\n    filesScanned: files.length,\n    filesModified: modifiedFiles.size,\n    totalMigrations,\n    totalSkipped: skipped.length,\n    componentCounts,\n    skippedCounts,\n    unmatchedFiles,\n    backupDir: backupDir ? path.relative(process.cwd(), backupDir) : '',\n  };\n}","/**\n * TailUI Migration ‚Äî File Scanner\n *\n * Parses source files (JSX, TSX, Vue, Svelte, HTML, Astro, Angular)\n * and extracts class attribute locations with their Tailwind classes.\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n/**\n * Supported file extensions\n */\nexport const SUPPORTED_EXTENSIONS: string[] = [\n  '.jsx', '.tsx', '.js', '.ts',\n  '.vue', '.svelte', '.astro',\n  '.html', '.htm',\n];\n\n/**\n * Interface representing a detected class attribute in a source file.\n */\nexport interface ClassMatch {\n  file: string;        // Absolute file path\n  line: number;        // 1-indexed line number\n  column: number;      // 0-indexed column of the class attribute start\n  original: string;    // The full original attribute (e.g. className=\"px-4...\")\n  classString: string; // The class string content (e.g. \"px-4 py-2 ...\")\n  classes: string[];   // Array of individual class names\n  tag: string;         // Detected HTML tag (e.g. 'button', 'div')\n  attrs: string[];     // Detected attributes on the element\n  startIndex: number;  // Character index of classString start in file\n  endIndex: number;    // Character index of classString end in file\n}\n\n/**\n * Regex patterns for extracting STATIC class attributes only.\n */\nconst CLASS_REGEXES: RegExp[] = [\n  /\\bclass(?:Name)?\\s*=\\s*\"([^\"]*)\"/g,\n  /\\bclass(?:Name)?\\s*=\\s*'([^']*)'/g,\n  /\\bclass(?:Name)?\\s*=\\s*\\{\"([^\"]*)\"\\}/g, // Support className={\"...\"}\n  /\\bclass(?:Name)?\\s*=\\s*\\{'([^']*)'\\}/g, // Support className={'...'}\n  /\\bclass(?:Name)?\\s*=\\s*\\{`([^`]*)`\\}/g, // Support className={`...`}\n  /:class\\s*=\\s*\"'([^']*)'\"/g,\n  /class:list\\s*=\\s*\\{\\s*\\[\\s*\"([^\"]*)\"/g,\n];\n\n/**\n * Patterns that indicate dynamic class expressions ‚Äî we SKIP these entirely.\n */\nconst DYNAMIC_CLASS_PATTERNS: RegExp[] = [\n  /\\bclass(?:Name)?\\s*=\\s*\\{[^}]*\\bcn\\s*\\(/,\n  /\\bclass(?:Name)?\\s*=\\s*\\{[^}]*\\bclsx\\s*\\(/,\n  /\\bclass(?:Name)?\\s*=\\s*\\{[^}]*\\bcva\\s*\\(/,\n  /\\bclass(?:Name)?\\s*=\\s*\\{[^}]*\\btwMerge\\s*\\(/,\n  /\\bclass(?:Name)?\\s*=\\s*\\{[^}]*\\bclassNames\\s*\\(/,\n  /\\bclass(?:Name)?\\s*=\\s*\\{`[^`]*\\$\\{/,\n  /\\bclass(?:Name)?\\s*=\\s*\\{[^\"'`}]+\\?[^}]+:/,\n  /\\bclass(?:Name)?\\s*=\\s*\\{`[^`]*\\$\\{/,       // D√©tecte ${variable}\n  /\\bclass(?:Name)?\\s*=\\s*\\{[^\"'`}]+\\?[^}]+:/, // D√©tecte condition ? 'a' : 'b'\n];\n\nconst TAG_REGEX = /<(\\w[\\w-]*)\\s[^>]*$/;\n\n/**\n * Scan a single file and return all class attribute matches.\n */\nexport function scanFile(filePath: string): ClassMatch[] {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const matches: ClassMatch[] = [];\n\n  if (!content.includes('class')) return matches;\n\n  for (const regex of CLASS_REGEXES) {\n    const re = new RegExp(regex.source, regex.flags);\n    let match: RegExpExecArray | null;\n\n    while ((match = re.exec(content)) !== null) {\n      const classString = match[1];\n      if (!classString || !classString.trim()) continue;\n\n      const lineStart = content.lastIndexOf('\\n', match.index) + 1;\n      const lineEnd = content.indexOf('\\n', match.index + match[0].length);\n      const fullLine = content.substring(lineStart, lineEnd === -1 ? content.length : lineEnd);\n      \n      if (isDynamicClassExpression(fullLine)) continue;\n\n      const classes = classString.split(/\\s+/).filter(Boolean);\n      \n      if (classes.length < 2) continue;\n\n      const beforeMatch = content.substring(0, match.index);\n      const line = (beforeMatch.match(/\\n/g) || []).length + 1;\n      const lastNewline = beforeMatch.lastIndexOf('\\n');\n      const column = match.index - lastNewline - 1;\n\n      const tag = detectTag(content, match.index);\n      const attrs = detectAttrs(content, match.index);\n\n      const fullMatch = match[0];\n      const classStringOffset = fullMatch.indexOf(classString);\n      const startIndex = match.index + classStringOffset;\n      const endIndex = startIndex + classString.length;\n\n      matches.push({\n        file: filePath, line, column, original: fullMatch,\n        classString, classes, tag, attrs, startIndex, endIndex,\n      });\n    }\n  }\n\n  return matches;\n}\n\n/**\n * Scan a directory recursively for supported files.\n */\nexport function findFiles(dirPath: string): string[] {\n  const results: string[] = [];\n\n  const walk = (dir: string): void => {\n    const entries = fs.readdirSync(dir, { withFileTypes: true });\n    for (const entry of entries) {\n      const fullPath = path.join(dir, entry.name);\n\n      if (entry.isDirectory()) {\n        const skipDirs = ['node_modules', '.git', '.next', '.nuxt', '.svelte-kit', 'dist', 'build', '.tailui-backup'];\n        if (skipDirs.includes(entry.name)) continue;\n        walk(fullPath);\n      } else if (entry.isFile()) {\n        const ext = path.extname(entry.name).toLowerCase();\n        if (SUPPORTED_EXTENSIONS.includes(ext)) {\n          results.push(fullPath);\n        }\n      }\n    }\n  };\n\n  walk(dirPath);\n  return results;\n}\n\n/**\n * Detect the HTML tag name for the element.\n */\nfunction detectTag(content: string, classAttrIndex: number): string {\n  const lookback = content.substring(Math.max(0, classAttrIndex - 1000), classAttrIndex);\n  const tagMatch = lookback.match(/<(\\w[\\w-]*)\\s[^>]*$/);\n  return tagMatch ? tagMatch[1].toLowerCase() : '';\n}\n\n/**\n * Detect other attributes on the element to improve matching confidence.\n */\nfunction detectAttrs(content: string, classAttrIndex: number): string[] {\n  const attrs: string[] = [];\n\n  const lookback = content.substring(Math.max(0, classAttrIndex - 500), classAttrIndex);\n  const openTagIdx = lookback.lastIndexOf('<');\n  if (openTagIdx === -1) return attrs;\n\n  const elementStart = Math.max(0, classAttrIndex - 500) + openTagIdx;\n  const closeIdx = content.indexOf('>', classAttrIndex);\n  if (closeIdx === -1) return attrs;\n\n  const elementStr = content.substring(elementStart, closeIdx + 1);\n\n  // Attribute checks\n  if (/\\bonClick\\b/i.test(elementStr)) attrs.push('onClick');\n  if (/\\bonclick\\b/.test(elementStr)) attrs.push('onclick');\n\n  const typeMatch = elementStr.match(/\\btype\\s*=\\s*[\"'](\\w+)[\"']/);\n  if (typeMatch) attrs.push(`type=\"${typeMatch[1]}\"`);\n\n  const roleMatch = elementStr.match(/\\brole\\s*=\\s*[\"'](\\w+)[\"']/);\n  if (roleMatch) attrs.push(`role=\"${roleMatch[1]}\"`);\n\n  if (/\\baria-modal\\b/.test(elementStr)) attrs.push('aria-modal');\n  if (/\\bplaceholder\\b/.test(elementStr)) attrs.push('placeholder');\n\n  return attrs;\n}\n\n/**\n * Validation to skip dynamic class logic.\n */\nfunction isDynamicClassExpression(line: string): boolean {\n  return DYNAMIC_CLASS_PATTERNS.some(re => re.test(line));\n}","/**\n * TailUI Migration ‚Äî Tag-First Pattern Definitions\n */\n\n// --- Types & Interfaces ---\n\nexport interface VariantDefinition {\n  name: string;\n  indicators: string[];\n  min: number;\n}\n\nexport interface ComponentDefinition {\n  uiClass: string;\n  confirm: string[];\n  confirmMin: number;\n  variants: VariantDefinition[];\n}\n\nexport interface AttrRule {\n  attrs: string[];\n  component: string;\n  uiClass: string;\n  minAttrs: number;\n}\n\n// --- TAG ‚Üí COMPONENT Mapping ---\n\nexport const TAG_MAP: Record<string, string | null> = {\n  button:   'button',\n  input:    'input',\n  textarea: 'textarea',\n  select:   'select',\n  label:    null,       // Ambiguous: resolved by attrs/classes\n  a:        null,       // Ambiguous: resolved by classes\n};\n\n// --- ATTR ‚Üí COMPONENT Mapping ---\n\nexport const ATTR_RULES: AttrRule[] = [\n  { attrs: ['role=\"dialog\"', 'aria-modal'],  component: 'modal',    uiClass: 'ui-modal',    minAttrs: 1 },\n  { attrs: ['role=\"alert\"'],                 component: 'alert',    uiClass: 'ui-alert',    minAttrs: 1 },\n  { attrs: ['role=\"progressbar\"'],           component: 'progress', uiClass: 'ui-progress', minAttrs: 1 },\n  { attrs: ['role=\"menu\"'],                  component: 'dropdown-menu', uiClass: 'ui-menu', minAttrs: 1 },\n  { attrs: ['role=\"list\"'],                  component: 'list',     uiClass: 'ui-list',     minAttrs: 1 },\n  { attrs: ['role=\"status\"'],                component: 'toast',    uiClass: 'ui-toast',    minAttrs: 1 },\n];\n\n// --- COMPONENT DEFINITIONS ---\n\nexport const COMPONENTS: Record<string, ComponentDefinition> = {\n  button: {\n    uiClass: 'ui-button',\n    confirm: ['rounded', 'font-', 'px-', 'py-', 'inline-flex', 'cursor-pointer', 'bg-', 'text-', 'border'],\n    confirmMin: 2,\n    variants: [\n      { name: 'ui-primary',   indicators: ['bg-blue-', 'text-white'],                          min: 2 },\n      { name: 'ui-secondary', indicators: ['bg-gray-100', 'bg-gray-200', 'text-gray-', 'border-gray-'], min: 2 },\n      { name: 'ui-danger',    indicators: ['bg-red-', 'text-white'],                           min: 2 },\n      { name: 'ui-ghost',     indicators: ['bg-transparent', 'hover:bg-gray-'],                min: 2 },\n      { name: 'ui-outline',   indicators: ['bg-transparent', 'border-2', 'border-current'],    min: 2 },\n    ],\n  },\n\n  input: {\n    uiClass: 'ui-input',\n    confirm: ['border', 'rounded', 'px-', 'py-', 'outline-', 'bg-', 'text-'],\n    confirmMin: 2,\n    variants: [\n      { name: 'ui-error',   indicators: ['border-red-', 'text-red-'],   min: 1 },\n      { name: 'ui-success', indicators: ['border-green-'],              min: 1 },\n    ],\n  },\n\n  textarea: {\n    uiClass: 'ui-textarea',\n    confirm: ['border', 'rounded', 'px-', 'py-', 'resize-y', 'resize-none', 'bg-', 'text-'],\n    confirmMin: 2,\n    variants: [\n      { name: 'ui-error',   indicators: ['border-red-'],   min: 1 },\n      { name: 'ui-success', indicators: ['border-green-'], min: 1 },\n    ],\n  },\n\n  select: {\n    uiClass: 'ui-select',\n    confirm: ['border', 'rounded', 'px-', 'py-', 'bg-', 'text-', 'appearance-none'],\n    confirmMin: 1,\n    variants: [],\n  },\n\n  'link-button': {\n    uiClass: 'ui-button',\n    confirm: ['rounded', 'font-medium', 'font-semibold', 'font-bold', 'px-', 'py-', 'inline-flex', 'bg-'],\n    confirmMin: 3,\n    variants: [\n      { name: 'ui-primary',   indicators: ['bg-blue-', 'text-white'],                          min: 2 },\n      { name: 'ui-secondary', indicators: ['bg-gray-100', 'bg-gray-200', 'text-gray-'],        min: 2 },\n      { name: 'ui-danger',    indicators: ['bg-red-', 'text-white'],                           min: 2 },\n      { name: 'ui-ghost',     indicators: ['bg-transparent', 'hover:bg-gray-'],                min: 2 },\n      { name: 'ui-outline',   indicators: ['bg-transparent', 'border-2', 'border-current'],    min: 2 },\n    ],\n  },\n\n  toggle: {\n    uiClass: 'ui-toggle',\n    confirm: ['inline-flex', 'items-center', 'cursor-pointer', 'gap-'],\n    confirmMin: 3,\n    variants: [],\n  },\n\n  radio: {\n    uiClass: 'ui-radio',\n    confirm: ['inline-flex', 'items-center', 'gap-', 'cursor-pointer', 'text-sm'],\n    confirmMin: 3,\n    variants: [],\n  },\n\n  'file-input': {\n    uiClass: 'ui-file-input',\n    confirm: ['border-2', 'border-dashed', 'rounded', 'cursor-pointer'],\n    confirmMin: 3,\n    variants: [],\n  },\n\n  modal: {\n    uiClass: 'ui-modal',\n    confirm: ['bg-', 'rounded', 'shadow', 'z-50', 'max-w-'],\n    confirmMin: 2,\n    variants: [],\n  },\n\n  alert: {\n    uiClass: 'ui-alert',\n    confirm: ['flex', 'items-start', 'rounded', 'border', 'text-sm', 'gap-3', 'px-4', 'py-3'],\n    confirmMin: 3,\n    variants: [\n      { name: 'ui-info',    indicators: ['bg-blue-50', 'border-blue-', 'text-blue-'],       min: 2 },\n      { name: 'ui-success', indicators: ['bg-green-50', 'border-green-', 'text-green-'],    min: 2 },\n      { name: 'ui-warning', indicators: ['bg-yellow-50', 'border-yellow-', 'text-yellow-'], min: 2 },\n      { name: 'ui-danger',  indicators: ['bg-red-50', 'border-red-', 'text-red-'],          min: 2 },\n    ],\n  },\n\n  progress: {\n    uiClass: 'ui-progress',\n    confirm: ['w-full', 'bg-gray-200', 'rounded-full', 'overflow-hidden'],\n    confirmMin: 4,\n    variants: [],\n  },\n\n  'dropdown-menu': {\n    uiClass: 'ui-menu',\n    confirm: ['absolute', 'z-50', 'bg-', 'border', 'rounded', 'shadow-lg'],\n    confirmMin: 5,\n    variants: [],\n  },\n\n  list: {\n    uiClass: 'ui-list',\n    confirm: ['flex', 'flex-col', 'divide-y', 'border', 'rounded'],\n    confirmMin: 3,\n    variants: [],\n  },\n\n  toast: {\n    uiClass: 'ui-toast',\n    confirm: ['flex', 'items-start', 'rounded', 'shadow-lg', 'border', 'text-sm'],\n    confirmMin: 4,\n    variants: [\n      { name: 'ui-success', indicators: ['bg-green-50', 'border-green-', 'text-green-'],    min: 2 },\n      { name: 'ui-danger',  indicators: ['bg-red-50', 'border-red-', 'text-red-'],          min: 2 },\n      { name: 'ui-warning', indicators: ['bg-yellow-50', 'border-yellow-', 'text-yellow-'], min: 2 },\n      { name: 'ui-info',    indicators: ['bg-blue-50', 'border-blue-', 'text-blue-'],       min: 2 },\n    ],\n  },\n\n  card: {\n    uiClass: 'ui-card',\n    confirm: ['rounded', 'border', 'bg-', 'overflow-hidden'],\n    confirmMin: 3,\n    variants: [\n      { name: 'ui-elevated', indicators: ['shadow-lg', 'shadow-xl'],                 min: 1 },\n      { name: 'ui-flat',     indicators: ['border-none', 'shadow-none', 'bg-gray-50'], min: 2 },\n    ],\n  },\n\n  badge: {\n    uiClass: 'ui-badge',\n    confirm: ['inline-flex', 'items-center', 'rounded-full', 'text-xs', 'font-medium'],\n    confirmMin: 4,\n    variants: [\n      { name: 'ui-primary',   indicators: ['bg-blue-100', 'text-blue-'],     min: 1 },\n      { name: 'ui-success',   indicators: ['bg-green-100', 'text-green-'],   min: 1 },\n      { name: 'ui-danger',    indicators: ['bg-red-100', 'text-red-'],       min: 1 },\n      { name: 'ui-warning',   indicators: ['bg-yellow-100', 'text-yellow-'], min: 1 },\n      { name: 'ui-secondary', indicators: ['bg-gray-100', 'text-gray-'],     min: 2 },\n    ],\n  },\n\n  avatar: {\n    uiClass: 'ui-avatar',\n    confirm: ['rounded-full', 'overflow-hidden', 'inline-flex', 'items-center', 'justify-center'],\n    confirmMin: 4,\n    variants: [],\n  },\n\n  overlay: {\n    uiClass: 'ui-overlay',\n    confirm: ['fixed', 'inset-0', 'bg-', 'z-40'],\n    confirmMin: 3,\n    variants: [],\n  },\n};\n\n// --- GENERIC TAG RULES ---\n\nexport const GENERIC_TAG_RULES: string[] = [\n  'overlay',\n  'dropdown-menu',\n  'file-input',\n  'progress',\n  'avatar',\n  'badge',\n  'toast',\n  'card',\n  'alert',\n  'list',\n];\n\n// --- PRESERVATION LOGIC ---\n\nexport const PRESERVE_PATTERNS: RegExp[] = [\n  // Spacing\n  /^m[trblxy]?-/,\n  /^-m[trblxy]?-/,\n  /^space-[xy]-/,\n  /^-space-[xy]-/,\n  // Sizing\n  /^w-/, /^h-/, /^min-w-/, /^min-h-/, /^max-w-/, /^max-h-/,\n  // Layout\n  /^flex$/, /^flex-/, /^grid$/, /^grid-/, /^col-/, /^row-/,\n  /^order-/, /^grow/, /^shrink/,\n  // Positioning\n  /^absolute$/, /^relative$/, /^fixed$/, /^sticky$/, /^static$/,\n  /^top-/, /^right-/, /^bottom-/, /^left-/, /^inset-/, /^z-/,\n  // Display\n  /^block$/, /^inline$/, /^inline-block$/, /^hidden$/, /^visible$/, /^invisible$/,\n  // Responsive prefixes\n  /^(sm|md|lg|xl|2xl):/,\n  // Container\n  /^container$/,\n  // Overflow\n  /^overflow-/,\n  // Aspect ratio\n  /^aspect-/,\n];\n\n/**\n * Check if a Tailwind class should be preserved (not consumed by migration).\n */\nexport function shouldPreserve(cls: string): boolean {\n  return PRESERVE_PATTERNS.some(re => re.test(cls));\n}","/**\n * TailUI Migration ‚Äî Tag-First Matcher\n * * PHILOSOPHY: The HTML tag is the PRIMARY signal.\n */\n\nimport {\n  TAG_MAP,\n  ATTR_RULES,\n  COMPONENTS,\n  GENERIC_TAG_RULES,\n  shouldPreserve,\n} from './patterns';\n\n// --- Types & Interfaces ---\n\nexport interface ClassMatch {\n  classes: string[];\n  tag?: string;\n  attrs?: string[];\n}\n\nexport interface MatchResult {\n  component: string;      // TailUI component name\n  uiClass: string;        // Primary ui-* class\n  uiVariants: string[];   // Detected variant classes\n  score: number;          // Confidence score (0‚Äì100)\n  consumed: string[];     // Tailwind classes consumed (for CSS generation)\n  preserved: string[];    // Classes to keep in HTML (layout, spacing)\n  newClassString: string; // The replacement class string\n  resolvedBy: 'tag' | 'attr' | 'class'; // How the match was resolved\n}\n\n// --- Internal Utility Functions ---\n\n/**\n * Extracts the base of a Tailwind class ignoring prefixes (e.g., md:hover:bg-blue-500 -> bg-blue-500)\n */\nfunction getBaseClass(cls: string): string {\n  const parts = cls.split(':');\n  return parts[parts.length - 1];\n}\n\n/**\n * Checks if a base class matches a pattern defined in patterns.ts\n */\nfunction matchPattern(base: string, pattern: string): boolean {\n  if (base === pattern) return true;\n  if (pattern.endsWith('-') && base.startsWith(pattern)) return true;\n  if (!pattern.includes('/') && !pattern.match(/\\d$/)) {\n    return base === pattern || base.startsWith(pattern + '-');\n  }\n  return false;\n}\n\n/**\n * Find a class (or one of its responsive/state variants) in the array.\n */\nfunction findMatchingClass(classes: string[], pattern: string): string | undefined {\n  return classes.find(cls => matchPattern(getBaseClass(cls), pattern));\n}\n\n// --- Main Functions ---\n\n/**\n * Find the best match for a ClassMatch using tag-first resolution.\n */\nexport function findBestMatch(\n  classMatch: ClassMatch, \n  threshold: number = 60\n): MatchResult | null {\n  const { classes, tag, attrs } = classMatch;\n\n  // ‚îÄ‚îÄ STEP 1: Deterministic tag resolution ‚îÄ‚îÄ\n  if (tag && tag in TAG_MAP) {\n    const componentKey = TAG_MAP[tag as keyof typeof TAG_MAP];\n\n    if (componentKey) {\n      const result = resolveComponent(componentKey, classes, 'tag');\n      if (result && result.score >= threshold) return result;\n    }\n\n    if (tag === 'a') {\n      const result = resolveComponent('link-button', classes, 'tag');\n      if (result && result.score >= threshold) return result;\n    }\n\n    if (tag === 'label') {\n      for (const key of ['toggle', 'radio', 'file-input']) {\n        const result = resolveComponent(key, classes, 'tag');\n        if (result && result.score >= threshold) return result;\n      }\n    }\n  }\n\n  // ‚îÄ‚îÄ STEP 2: Attribute-based resolution (aria-roles, types, etc.) ‚îÄ‚îÄ\n  if (attrs && attrs.length > 0) {\n    for (const rule of ATTR_RULES) {\n      let matched = 0;\n      for (const attr of rule.attrs) {\n        if (attrs.some(a => a === attr || a.includes(attr))) {\n          matched++;\n        }\n      }\n      if (matched >= rule.minAttrs) {\n        const result = resolveComponent(rule.component, classes, 'attr');\n        if (result && result.score >= threshold) return result;\n      }\n    }\n  }\n\n  // ‚îÄ‚îÄ STEP 3: Class-based fallback for generic tags (div, span) ‚îÄ‚îÄ\n  if (!tag || !(tag in TAG_MAP)) {\n    for (const componentKey of GENERIC_TAG_RULES) {\n      const result = resolveComponent(componentKey, classes, 'class');\n      if (result && result.score >= threshold) return result;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Resolve a specific component against the given classes.\n */\nexport function resolveComponent(\n  componentKey: string, \n  classes: string[], \n  resolvedBy: 'tag' | 'attr' | 'class'\n): MatchResult | null {\n  const def = COMPONENTS[componentKey as keyof typeof COMPONENTS];\n  if (!def) return null;\n\n  const initialConsumed = new Set<string>();\n\n  \n  let confirmed = 0;\n  for (const pattern of def.confirm) {\n    const found = findMatchingClass(classes, pattern);\n    if (found) confirmed++;\n  }\n\n  if (confirmed < def.confirmMin) return null;\n\n\n  for (const cls of classes) {\n    const base = getBaseClass(cls);\n    \n    const isConfirm = def.confirm.some(p => matchPattern(base, p));\n    const isVariant = def.variants?.some(v => v.indicators.some(p => matchPattern(base, p)));\n\n    if (isConfirm || isVariant) {\n      initialConsumed.add(cls);\n    }\n  }\n\n\n  const uiVariants: string[] = [];\n  if (def.variants) {\n    for (const variant of def.variants) {\n      if (variant.indicators.some(ind => findMatchingClass(classes, ind))) {\n        uiVariants.push(variant.name);\n      }\n    }\n  }\n\n  // Calcul du Score\n  let score = (resolvedBy === 'tag') ? 70 : (resolvedBy === 'attr' ? 65 : 40);\n  score += Math.round((confirmed / def.confirm.length) * 30);\n  score = Math.min(score, 100);\n\n  // 5. Arbitrage final : Preserved (Layout) vs Consumed (Style)\n  const preserved: string[] = [];\n  const finalConsumed = new Set<string>(initialConsumed);\n\n  for (const cls of classes) {\n    const base = getBaseClass(cls);\n    \n    if (shouldPreserve(base)) {\n      preserved.push(cls);\n      finalConsumed.delete(cls);\n    } \n\n    else if (!finalConsumed.has(cls)) {\n      finalConsumed.add(cls);\n    }\n  }\n\n  const uiClasses = [def.uiClass, ...uiVariants];\n  const newClassString = [...uiClasses, ...preserved].join(' ');\n\n  return {\n    component: componentKey,\n    uiClass: def.uiClass,\n    uiVariants,\n    score,\n    consumed: Array.from(finalConsumed),\n    preserved,\n    newClassString,\n    resolvedBy,\n  };\n}","/**\n * TailUI Migration ‚Äî Transformer\n *\n * Applies migration replacements to file contents.\n * Handles both dry-run (preview) and actual write modes.\n */\n\nimport * as fs from 'fs';\n\n/**\n * Interface representing a migration replacement.\n * (Note: This can also be imported from a shared types file)\n */\nexport interface Replacement {\n  file: string;          // Absolute file path\n  line: number;          // Line number\n  original: string;      // Original full attribute string\n  classString: string;   // Original class string\n  newClassString: string; // Replacement class string\n  startIndex: number;    // Start index of classString in file\n  endIndex: number;      // End index of classString in file\n  component: string;     // Matched TailUI component\n  uiClass: string;       // Primary ui-* class\n  uiVariants: string[];  // Detected variant classes\n  score: number;         // Confidence score\n}\n\n/**\n * Apply replacements to a file's content.\n * Replacements are processed in reverse order (bottom-up) to \n * maintain index integrity as the string length changes.\n *\n * @param filePath - Path to the file to transform\n * @param replacements - Array of replacements to apply\n * @returns The new file content\n */\nexport function applyReplacements(filePath: string, replacements: Replacement[]): string {\n  let content: string = fs.readFileSync(filePath, 'utf8');\n\n  // Sort by startIndex descending so we replace from end to start\n  // to avoid shifting indices for subsequent replacements.\n  const sorted = [...replacements].sort((a, b) => b.startIndex - a.startIndex);\n\n  for (const rep of sorted) {\n    content =\n      content.substring(0, rep.startIndex) +\n      rep.newClassString +\n      content.substring(rep.endIndex);\n  }\n\n  return content;\n}\n\n/**\n * Write the transformed content to disk.\n *\n * @param filePath - Destination path\n * @param content - Content to write\n */\nexport function writeFile(filePath: string, content: string): void {\n  fs.writeFileSync(filePath, content, 'utf8');\n}\n\n/**\n * Generate a diff-like preview for a single replacement.\n *\n * @param rep - The replacement object to format\n * @returns A formatted string for terminal output\n */\nexport function formatDiff(rep: Replacement): string {\n  const lines: string[] = [];\n  lines.push(`  ${rep.file}:${rep.line}`);\n  lines.push(`  - ${rep.classString}`);\n  lines.push(`  + ${rep.newClassString}`);\n  \n  const variants = rep.uiVariants.length ? ' ' + rep.uiVariants.join(' ') : '';\n  lines.push(`  ‚Üí ${rep.uiClass}${variants} (${rep.score}% confidence)`);\n  \n  return lines.join('\\n');\n}","/**\n * TailUI Migration ‚Äî Reporter\n *\n * Generates formatted migration reports for the terminal.\n */\n\n/**\n * @typedef {Object} MigrationStats\n * @property {number} filesScanned\n * @property {number} filesModified\n * @property {number} totalMigrations\n * @property {number} totalSkipped\n * @property {Object<string, number>} componentCounts  - { 'ui-button': 12, ... }\n * @property {Object<string, number>} skippedCounts    - { 'ui-modal': 3, ... }\n * @property {string[]} unmatchedFiles                  - Files with no matches\n * @property {string} backupDir                         - Backup directory path\n */\nexport interface MigrationStats {\n  filesScanned: number;\n  filesModified: number;\n  totalMigrations: number;\n  totalSkipped: number;\n  componentCounts: Record<string, number>;\n  skippedCounts: Record<string, number>;\n  unmatchedFiles: string[];\n  backupDir: string;\n}\n\n/**\n * Interface for representing a replacement (equivalent to JSDoc Replacement)\n */\nexport interface Replacement {\n  file: string;\n  line: number;\n  original: string;\n  classString: string;\n  newClassString: string;\n  startIndex: number;\n  endIndex: number;\n  component: string;\n  uiClass: string;\n  uiVariants: string[];\n  score: number;\n}\n\n/**\n * Print the full migration report.\n *\n * @param {MigrationStats} stats\n * @param {boolean} isDryRun\n */\nexport function printReport(stats: MigrationStats, isDryRun: boolean): void {\n  const title = isDryRun ? 'TailUI Migration Preview' : 'TailUI Migration Report';\n\n  console.log('');\n  console.log(`  ‚îå${'‚îÄ'.repeat(47)}‚îê`);\n  console.log(`  ‚îÇ  ${title.padEnd(45)}‚îÇ`);\n  console.log(`  ‚îú${'‚îÄ'.repeat(47)}‚î§`);\n  console.log(`  ‚îÇ  Files scanned:    ${String(stats.filesScanned).padEnd(26)}‚îÇ`);\n  console.log(`  ‚îÇ  Files modified:   ${String(stats.filesModified).padEnd(26)}‚îÇ`);\n  console.log(`  ‚îÇ  Migrations:       ${String(stats.totalMigrations).padEnd(26)}‚îÇ`);\n\n  if (stats.totalSkipped > 0) {\n    console.log(`  ‚îÇ  Skipped:          ${String(stats.totalSkipped).padEnd(26)}‚îÇ`);\n  }\n\n  console.log(`  ‚îÇ${' '.repeat(47)}‚îÇ`);\n\n  // Component breakdown\n  const sortedComponents = Object.entries(stats.componentCounts)\n    .sort((a, b) => b[1] - a[1]);\n\n  for (const [component, count] of sortedComponents) {\n    const line = `  ‚úì ${component.padEnd(16)} ${count} replacement${count > 1 ? 's' : ''}`;\n    console.log(`  ‚îÇ${line.padEnd(47)}‚îÇ`);\n  }\n\n  // Skipped components\n  const sortedSkipped = Object.entries(stats.skippedCounts)\n    .sort((a, b) => b[1] - a[1]);\n\n  for (const [component, count] of sortedSkipped) {\n    const line = `  ‚ö† ${component.padEnd(16)} ${count} skipped (low score)`;\n    console.log(`  ‚îÇ${line.padEnd(47)}‚îÇ`);\n  }\n\n  // Unmatched\n  if (stats.unmatchedFiles.length > 0) {\n    const line = `  ‚úó ${stats.unmatchedFiles.length} file${stats.unmatchedFiles.length > 1 ? 's' : ''} with no matches`;\n    console.log(`  ‚îÇ${line.padEnd(47)}‚îÇ`);\n  }\n\n  console.log(`  ‚îÇ${' '.repeat(47)}‚îÇ`);\n\n  if (!isDryRun && stats.backupDir) {\n    const backupLine = `  Backup: ${stats.backupDir}`;\n    // Truncate if too long\n    const truncated = backupLine.length > 45\n      ? backupLine.substring(0, 42) + '...'\n      : backupLine;\n    console.log(`  ‚îÇ${truncated.padEnd(47)}‚îÇ`);\n  }\n\n  if (isDryRun) {\n    console.log(`  ‚îÇ  Run without --dry-run to apply changes.${' '.repeat(3)}‚îÇ`);\n  }\n\n  console.log(`  ‚îî${'‚îÄ'.repeat(47)}‚îò`);\n  console.log('');\n}\n\n/**\n * Print a single file's migration preview.\n *\n * @param {string} filePath\n * @param {Replacement[]} replacements\n */\nexport function printFilePreview(filePath: string, replacements: Replacement[]): void {\n  console.log(`\\n  üìÑ ${filePath}`);\n  for (const rep of replacements) {\n    console.log(`     L${rep.line}: ${rep.component} (${rep.score}%)`);\n    console.log(`     \\x1b[31m- ${truncate(rep.classString, 70)}\\x1b[0m`);\n    console.log(`     \\x1b[32m+ ${truncate(rep.newClassString, 70)}\\x1b[0m`);\n  }\n}\n\n/**\n * Print interactive prompt info for a replacement.\n *\n * @param {Replacement} rep\n * @param {number} index\n * @param {number} total\n */\nexport function printInteractiveItem(rep: Replacement, index: number, total: number): void {\n  console.log(`\\n  [${index + 1}/${total}] ${rep.file}:${rep.line}`);\n  console.log(`  Component: ${rep.uiClass}${rep.uiVariants.length ? ' ' + rep.uiVariants.join(' ') : ''} (${rep.score}% confidence)`);\n  console.log(`  \\x1b[31m- ${truncate(rep.classString, 70)}\\x1b[0m`);\n  console.log(`  \\x1b[32m+ ${truncate(rep.newClassString, 70)}\\x1b[0m`);\n}\n\n/**\n * Truncate a string with ellipsis.\n * * @param {string} str\n * @param {number} maxLen\n */\nfunction truncate(str: string, maxLen: number): string {\n  if (str.length <= maxLen) return str;\n  return str.substring(0, maxLen - 3) + '...';\n}","import fs from 'fs';\nimport path from 'path';\n\nexport const BACKUP_ROOT = '.tailui-backup';\n\ninterface Manifest {\n  timestamp: string;\n  date: string;\n  files: string[];\n  projectRoot: string;\n}\n\ninterface RestoreResult {\n  restored: number;\n  backupDir: string;\n}\n\ninterface BackupEntry {\n  timestamp: string;\n  date: string;\n  fileCount: number;\n}\n\n/**\n * Create a backup of files before migration.\n * Stores them in .tailui-backup/<timestamp>/ preserving relative paths.\n *\n * @param filePaths - Absolute paths of files to back up\n * @param projectRoot - Project root directory\n * @returns The backup directory path\n */\nexport function createBackup(filePaths: string[], projectRoot: string): string {\n  const timestamp = new Date().toISOString().replace(/[:.]/g, '-').substring(0, 19);\n  const backupDir = path.join(projectRoot, BACKUP_ROOT, timestamp);\n\n  for (const filePath of filePaths) {\n    const relativePath = path.relative(projectRoot, filePath);\n    const backupPath = path.join(backupDir, relativePath);\n\n    const backupSubDir = path.dirname(backupPath);\n    if (!fs.existsSync(backupSubDir)) {\n      fs.mkdirSync(backupSubDir, { recursive: true });\n    }\n\n    fs.copyFileSync(filePath, backupPath);\n  }\n\n  const manifest: Manifest = {\n    timestamp,\n    date: new Date().toISOString(),\n    files: filePaths.map(f => path.relative(projectRoot, f)),\n    projectRoot,\n  };\n\n  fs.writeFileSync(\n    path.join(backupDir, '.manifest.json'),\n    JSON.stringify(manifest, null, 2)\n  );\n\n  return backupDir;\n}\n\n/**\n * Restore files from the most recent backup.\n *\n * @param projectRoot - Project root directory\n * @param backupTimestamp - Specific backup to restore (optional, defaults to latest)\n * @returns Restore result or null if no backup found\n */\nexport function restoreBackup(projectRoot: string, backupTimestamp?: string): RestoreResult | null {\n  const backupRoot = path.join(projectRoot, BACKUP_ROOT);\n\n  if (!fs.existsSync(backupRoot)) return null;\n\n  let targetDir: string;\n\n  if (backupTimestamp) {\n    targetDir = path.join(backupRoot, backupTimestamp);\n    if (!fs.existsSync(targetDir)) return null;\n  } else {\n    const backups = fs.readdirSync(backupRoot)\n      .filter(d => {\n        const fullPath = path.join(backupRoot, d);\n        return fs.statSync(fullPath).isDirectory() && d !== '.gitkeep';\n      })\n      .sort()\n      .reverse();\n\n    if (backups.length === 0) return null;\n    targetDir = path.join(backupRoot, backups[0]);\n  }\n\n  const manifestPath = path.join(targetDir, '.manifest.json');\n  if (!fs.existsSync(manifestPath)) return null;\n\n  let manifest: Manifest;\n  try {\n    manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8')) as Manifest;\n  } catch {\n    return null;\n  }\n\n  let restored = 0;\n\n  for (const relativePath of manifest.files) {\n    const backupFile = path.join(targetDir, relativePath);\n    const originalFile = path.join(projectRoot, relativePath);\n\n    if (fs.existsSync(backupFile)) {\n      const targetSubDir = path.dirname(originalFile);\n      if (!fs.existsSync(targetSubDir)) {\n        fs.mkdirSync(targetSubDir, { recursive: true });\n      }\n\n      fs.copyFileSync(backupFile, originalFile);\n      restored++;\n    }\n  }\n\n  return { restored, backupDir: targetDir };\n}\n\n/**\n * List all available backups.\n *\n * @param projectRoot - Project root directory\n * @returns Array of backup entries\n */\nexport function listBackups(projectRoot: string): BackupEntry[] {\n  const backupRoot = path.join(projectRoot, BACKUP_ROOT);\n\n  if (!fs.existsSync(backupRoot)) return [];\n\n  const dirs = fs.readdirSync(backupRoot)\n    .filter(d => fs.statSync(path.join(backupRoot, d)).isDirectory())\n    .sort()\n    .reverse();\n\n  const backups: BackupEntry[] = [];\n\n  for (const dir of dirs) {\n    const manifestPath = path.join(backupRoot, dir, '.manifest.json');\n    if (!fs.existsSync(manifestPath)) continue;\n\n    try {\n      const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8')) as Manifest;\n      backups.push({\n        timestamp: dir,\n        date: manifest.date,\n        fileCount: manifest.files.length,\n      });\n    } catch {\n      // Skip corrupt manifests\n    }\n  }\n\n  return backups;\n}"],"mappings":"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","names":["fs","path","fs","fs","path","filesToBackup","backupDir","resolve"]}