{"version":3,"sources":["../src/config.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nexport const CONFIG_FILE = 'ui.config.json';\nexport const DEFAULT_DIR = 'ui';\n\nexport interface PluginOptions {\n  path?: string;\n  [key: string]: unknown;\n}\n\nexport interface TailUIConfig {\n  stylesDir?: string;\n  [key: string]: unknown;\n}\n\nexport interface ResolvedConfig {\n  stylesDir: string;\n  configPath: string;\n  config: TailUIConfig | null;\n}\n\n/**\n * Resolve the TailUI styles directory.\n *\n * Priority:\n *   1. Explicit `options.path` (from plugin config)\n *   2. `stylesDir` from ui.config.json\n *   3. Default: ./ui/styles\n */\nexport function resolveConfig(options: PluginOptions = {}): ResolvedConfig {\n  const configPath = path.join(process.cwd(), CONFIG_FILE);\n  let config: TailUIConfig | null = null;\n\n  if (fs.existsSync(configPath)) {\n    try {\n      config = JSON.parse(fs.readFileSync(configPath, 'utf8')) as TailUIConfig;\n    } catch (e) {\n      console.warn(`[TailUI] ⚠️  Failed to parse ${CONFIG_FILE}: ${(e as Error).message}`);\n    }\n  }\n\n  let stylesDir: string;\n  if (options.path) {\n    stylesDir = options.path;\n  } else if (config?.stylesDir) {\n    stylesDir = config.stylesDir;\n  } else {\n    stylesDir = `./${DEFAULT_DIR}/styles`;\n  }\n\n  const resolved = path.resolve(process.cwd(), stylesDir);\n  if (!resolved.startsWith(process.cwd())) {\n    console.warn(`[TailUI] ⚠️  stylesDir \"${stylesDir}\" resolves outside the project. Using default.`);\n    stylesDir = `./${DEFAULT_DIR}/styles`;\n  }\n\n  return { stylesDir, configPath, config };\n}"],"mappings":";AAAA,OAAO,QAAQ;AACf,OAAO,UAAU;AAEV,IAAM,cAAc;AACpB,IAAM,cAAc;AA0BpB,SAAS,cAAc,UAAyB,CAAC,GAAmB;AACzE,QAAM,aAAa,KAAK,KAAK,QAAQ,IAAI,GAAG,WAAW;AACvD,MAAI,SAA8B;AAElC,MAAI,GAAG,WAAW,UAAU,GAAG;AAC7B,QAAI;AACF,eAAS,KAAK,MAAM,GAAG,aAAa,YAAY,MAAM,CAAC;AAAA,IACzD,SAAS,GAAG;AACV,cAAQ,KAAK,0CAAgC,WAAW,KAAM,EAAY,OAAO,EAAE;AAAA,IACrF;AAAA,EACF;AAEA,MAAI;AACJ,MAAI,QAAQ,MAAM;AAChB,gBAAY,QAAQ;AAAA,EACtB,WAAW,QAAQ,WAAW;AAC5B,gBAAY,OAAO;AAAA,EACrB,OAAO;AACL,gBAAY,KAAK,WAAW;AAAA,EAC9B;AAEA,QAAM,WAAW,KAAK,QAAQ,QAAQ,IAAI,GAAG,SAAS;AACtD,MAAI,CAAC,SAAS,WAAW,QAAQ,IAAI,CAAC,GAAG;AACvC,YAAQ,KAAK,qCAA2B,SAAS,gDAAgD;AACjG,gBAAY,KAAK,WAAW;AAAA,EAC9B;AAEA,SAAO,EAAE,WAAW,YAAY,OAAO;AACzC;","names":[]}