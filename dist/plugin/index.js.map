{"version":3,"sources":["../../src/plugin/index.ts"],"sourcesContent":["import plugin from 'tailwindcss/plugin';\nimport fs from 'fs';\nimport path from 'path';\n \nimport { resolveConfig, type PluginOptions } from '../config';\n\n/**\n * TailUI — Tailwind CSS Plugin (Zero-Config)\n *\n * Automatically resolves the styles directory from ui.config.json\n * and adds it to Tailwind's content paths so .ui-* classes are\n * detected and not tree-shaken.\n */\nconst tailuiPlugin = plugin.withOptions(\n  (options: PluginOptions = {}) => {\n    const { stylesDir } = resolveConfig(options);\n\n    return function ({ /* addUtilities, addComponents, etc. */ }) {\n      const fullPath = path.resolve(process.cwd(), stylesDir);\n\n      if (!fs.existsSync(fullPath)) {\n        console.warn(`[TailUI] ⚠️ Styles directory not found: ${fullPath}`);\n        console.warn(`[TailUI] Run \"npx tailui init\" to create it.`);\n        return;\n      }\n\n      const files = fs\n        .readdirSync(fullPath)\n        .filter((f) => f.startsWith('ui.') && f.endsWith('.css'))\n        .sort();\n\n      if (files.length === 0) {\n        console.warn(`[TailUI] ⚠️ No ui.*.css files found in ${fullPath}`);\n        return;\n      }\n\n      // Log informatif lors du build Tailwind\n      console.log(\n        `[TailUI] ✅ Found ${files.length} component(s): ${files\n          .map((f) => f.replace('ui.', '').replace('.css', ''))\n          .join(', ')}`\n      );\n    };\n  },\n  (options: PluginOptions = {}) => {\n    const { stylesDir } = resolveConfig(options);\n    const fullPath = path.resolve(process.cwd(), stylesDir);\n\n    return {\n      // On ajoute les fichiers CSS au \"content\" de Tailwind \n      // pour que les classes .ui-* ne soient pas supprimées par le Purge/JIT\n      content: [path.join(fullPath, 'ui.*.css')],\n    };\n  }\n);\n\nexport default tailuiPlugin;"],"mappings":";;;;;;AAAA,OAAO,YAAY;AACnB,OAAO,QAAQ;AACf,OAAO,UAAU;AAWjB,IAAM,eAAe,OAAO;AAAA,EAC1B,CAAC,UAAyB,CAAC,MAAM;AAC/B,UAAM,EAAE,UAAU,IAAI,cAAc,OAAO;AAE3C,WAAO,SAAU;AAAA;AAAA,IAA0C,GAAG;AAC5D,YAAM,WAAW,KAAK,QAAQ,QAAQ,IAAI,GAAG,SAAS;AAEtD,UAAI,CAAC,GAAG,WAAW,QAAQ,GAAG;AAC5B,gBAAQ,KAAK,qDAA2C,QAAQ,EAAE;AAClE,gBAAQ,KAAK,8CAA8C;AAC3D;AAAA,MACF;AAEA,YAAM,QAAQ,GACX,YAAY,QAAQ,EACpB,OAAO,CAAC,MAAM,EAAE,WAAW,KAAK,KAAK,EAAE,SAAS,MAAM,CAAC,EACvD,KAAK;AAER,UAAI,MAAM,WAAW,GAAG;AACtB,gBAAQ,KAAK,oDAA0C,QAAQ,EAAE;AACjE;AAAA,MACF;AAGA,cAAQ;AAAA,QACN,yBAAoB,MAAM,MAAM,kBAAkB,MAC/C,IAAI,CAAC,MAAM,EAAE,QAAQ,OAAO,EAAE,EAAE,QAAQ,QAAQ,EAAE,CAAC,EACnD,KAAK,IAAI,CAAC;AAAA,MACf;AAAA,IACF;AAAA,EACF;AAAA,EACA,CAAC,UAAyB,CAAC,MAAM;AAC/B,UAAM,EAAE,UAAU,IAAI,cAAc,OAAO;AAC3C,UAAM,WAAW,KAAK,QAAQ,QAAQ,IAAI,GAAG,SAAS;AAEtD,WAAO;AAAA;AAAA;AAAA,MAGL,SAAS,CAAC,KAAK,KAAK,UAAU,UAAU,CAAC;AAAA,IAC3C;AAAA,EACF;AACF;AAEA,IAAO,iBAAQ;","names":[]}